arr = [1, 2, 1, 2, 1]
K = 3
count = 0

for i in range(len(arr)):
    for j in range(i+1, len(arr)+1):
        subarray = arr[i:j]
        if sum(subarray) == K:
            count += 1

print(count)  # Output: 4
